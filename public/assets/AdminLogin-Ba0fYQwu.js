import{c as b,r as i,o as C,J as E,s as F,j as e,m as T,C as A,a as I,L as x,b as P,e as R,d as M,B as u}from"./index-CuprRf9A.js";import{u as O,F as U,a as p,b as f,c as j,d as g,e as y,z as c,t as W}from"./form-BS08ZxNH.js";import{I as w}from"./input-C7AUaPAc.js";import{S as z}from"./shield-B5sw-Pqc.js";import{U as B}from"./user-Cl-ZMPZM.js";import{E as q}from"./eye-CjoTDjXc.js";import{T as J}from"./triangle-alert-CjSSRQIf.js";import"./label-BOUa42Nh.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=b("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=b("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),H=c.object({username:c.string().min(1,"Username is required"),password:c.string().min(1,"Password is required")});function se(){const[o,N]=i.useState(!1),[s,l]=i.useState(!1),{toast:d}=C(),{isAuthenticated:m,checkAuth:k}=E(),[,n]=F(),r=O({resolver:W(H),defaultValues:{username:"",password:""}});i.useEffect(()=>{m&&n("/admin")},[m,n]);const v=async a=>{l(!0);try{const t=await fetch("/api/csrf-token",{credentials:"include"});if(!t.ok)throw new Error("Failed to get CSRF token");const{token:L}=await t.json(),h=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":L},credentials:"include",body:JSON.stringify(a)}),S=await h.json();if(!h.ok)throw new Error(S.message||"Login failed");d({title:"Login successful",description:"Welcome to the admin dashboard!"}),await k()&&n("/admin")}catch(t){console.error("Login error:",t),d({title:"Login failed",description:t.message||"Invalid credentials. Please try again.",variant:"destructive"})}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:e.jsxs(A,{className:"shadow-lg",children:[e.jsxs(I,{className:"space-y-1 text-center",children:[e.jsx(x,{href:"/",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-6",children:[e.jsx("img",{src:"/worknovas-logo.png",alt:"WorkNovas Technologies",className:"h-12 w-auto"}),e.jsx("span",{className:"font-bold text-xl text-ink",children:"WorkNovas Technologies"})]})}),e.jsxs(P,{className:"text-2xl font-bold flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-6 h-6 text-primary"}),"Admin Login"]}),e.jsx(R,{children:"Enter your credentials to access the admin dashboard"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx(U,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(v),className:"space-y-4",children:[e.jsx(p,{control:r.control,name:"username",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Username"}),e.jsx(g,{children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(w,{...a,type:"text",placeholder:"Enter your username",className:"pl-10",disabled:s,"data-testid":"input-username"})]})}),e.jsx(y,{})]})}),e.jsx(p,{control:r.control,name:"password",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Password"}),e.jsx(g,{children:e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(w,{...a,type:o?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10",disabled:s,"data-testid":"input-password"}),e.jsx("button",{type:"button",className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground hover:text-foreground",onClick:()=>N(!o),disabled:s,children:o?e.jsx(V,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]})}),e.jsx(y,{})]})}),e.jsx(u,{type:"submit",className:"w-full",disabled:s,"data-testid":"button-login",children:s?"Signing in...":"Sign In"})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:[e.jsx(J,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{children:"Admin access only"})]})}),e.jsx("div",{className:"text-center",children:e.jsx(x,{href:"/",children:e.jsx(u,{variant:"ghost",size:"sm",children:"‚Üê Back to WorkNovas Technologies"})})})]})]})})})}export{se as default};
