import{c as T,r as f,j as e,L as B,B as x,C as t,d as l,a as i,b as c,e as d}from"./index-CuprRf9A.js";import{u as F}from"./useQuery-ZJWojQjZ.js";import{B as P}from"./badge-gyCBv1ly.js";import{S as p,a as N,b as g,c as y,d as a}from"./select-CtwjQDgd.js";import{A as M}from"./arrow-left-C_Zpo_h0.js";import{T as b}from"./trending-up-3yF84ArF.js";import{R as z}from"./refresh-cw-pEi6f55H.js";import{D as E}from"./download-yc1mZr8Q.js";import{C as I}from"./calendar-BnnWEMnC.js";import{F as V}from"./filter-DZsR-ZXm.js";import{U as h}from"./users-CvrVW2dn.js";import{D as O}from"./dollar-sign-CKcXNn6o.js";import{T as j}from"./target-Daxxxr6z.js";import{A as w}from"./activity-CJH3RrLQ.js";import{C as A}from"./chart-no-axes-column-increasing-B3AX3zXE.js";import"./utils-km2FGkQ4.js";import"./index-B6XFBDnY.js";import"./Combination-DKMiJ1tB.js";import"./index-DqFLgNHl.js";import"./index-CCUsGLlQ.js";import"./check-CFzykUac.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=T("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);function oe(){const[u,S]=f.useState("30days"),[v,C]=f.useState("all"),{data:m,isLoading:k,isError:R,refetch:U}=F({queryKey:["/api/admin/analytics/detailed",u,v],refetchInterval:5*60*1e3,retry:3,retryDelay:2e3});if(k&&!m)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});const s=m||{overview:{totalUsers:0,totalRevenue:0,conversionRate:0,growthRate:0},userActivity:{dailyActiveUsers:0,weeklyActiveUsers:0,monthlyActiveUsers:0,averageSessionDuration:0},servicePerformance:[],revenueBreakdown:{careerAdvisory:0,staffingServices:0,aiOptimizer:0,other:0},monthlyTrends:[],geographicData:[],conversionFunnel:{visitors:0,signups:0,trials:0,conversions:0}},L=R&&!m,n=r=>`$${r.toLocaleString()}`,o=r=>`${r.toFixed(1)}%`;return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{href:"/admin",children:e.jsxs(x,{variant:"ghost",size:"sm",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-ink flex items-center gap-2",children:[e.jsx(b,{className:"w-8 h-8 text-primary"}),"Advanced Analytics"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive business insights and performance metrics"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:"ghost",onClick:()=>U(),children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(x,{children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Export Report"]})]})]}),L&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800",children:"⚠️ Unable to load analytics data. Showing empty state."})}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(p,{value:u,onValueChange:S,children:[e.jsxs(N,{className:"w-[180px]",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),e.jsx(g,{placeholder:"Time range"})]}),e.jsxs(y,{children:[e.jsx(a,{value:"7days",children:"Last 7 days"}),e.jsx(a,{value:"30days",children:"Last 30 days"}),e.jsx(a,{value:"90days",children:"Last 90 days"}),e.jsx(a,{value:"1year",children:"Last year"}),e.jsx(a,{value:"all",children:"All time"})]})]}),e.jsxs(p,{value:v,onValueChange:C,children:[e.jsxs(N,{className:"w-[160px]",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),e.jsx(g,{placeholder:"Metrics"})]}),e.jsxs(y,{children:[e.jsx(a,{value:"all",children:"All Metrics"}),e.jsx(a,{value:"revenue",children:"Revenue"}),e.jsx(a,{value:"users",children:"Users"}),e.jsx(a,{value:"conversion",children:"Conversion"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold",children:s.overview.totalUsers.toLocaleString()})]}),e.jsx(h,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:n(s.overview.totalRevenue)})]}),e.jsx(O,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversion Rate"}),e.jsx("p",{className:"text-2xl font-bold",children:o(s.overview.conversionRate)})]}),e.jsx(j,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Growth Rate"}),e.jsx("p",{className:"text-2xl font-bold",children:o(s.overview.growthRate)})]}),e.jsx(b,{className:"w-8 h-8 text-primary"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"User Activity"]}),e.jsx(d,{children:"Active user engagement metrics"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Daily Active Users"}),e.jsx("span",{className:"font-bold",children:s.userActivity.dailyActiveUsers.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Weekly Active Users"}),e.jsx("span",{className:"font-bold",children:s.userActivity.weeklyActiveUsers.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Active Users"}),e.jsx("span",{className:"font-bold",children:s.userActivity.monthlyActiveUsers.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg. Session Duration"}),e.jsxs("span",{className:"font-bold",children:[s.userActivity.averageSessionDuration," min"]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Revenue Breakdown"]}),e.jsx(d,{children:"Revenue distribution by service"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Career Advisory"})]}),e.jsx("span",{className:"font-bold",children:n(s.revenueBreakdown.careerAdvisory)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Staffing Services"})]}),e.jsx("span",{className:"font-bold",children:n(s.revenueBreakdown.staffingServices)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"AI CareerCatalyst"})]}),e.jsx("span",{className:"font-bold",children:n(s.revenueBreakdown.aiOptimizer)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Other Services"})]}),e.jsx("span",{className:"font-bold",children:n(s.revenueBreakdown.other)})]})]})})]})]}),e.jsxs(t,{className:"mb-6",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Service Performance"]}),e.jsx(d,{children:"Usage metrics and satisfaction scores by service"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:s.servicePerformance.length>0?s.servicePerformance.map((r,D)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:r.service}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Usage: ",e.jsx("span",{className:"font-medium",children:r.usage.toLocaleString()})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Revenue: ",e.jsx("span",{className:"font-medium",children:n(r.revenue)})]})]})]}),e.jsxs(P,{className:"bg-green-100 text-green-800",children:[o(r.satisfaction)," satisfaction"]})]},D)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No service performance data available"})]})})})]}),e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Conversion Funnel"]}),e.jsx(d,{children:"Customer journey and conversion analysis"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(h,{className:"w-8 h-8 text-blue-600"})}),e.jsx("p",{className:"font-bold text-xl",children:s.conversionFunnel.visitors.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Visitors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(h,{className:"w-8 h-8 text-green-600"})}),e.jsx("p",{className:"font-bold text-xl",children:s.conversionFunnel.signups.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign-ups"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(w,{className:"w-8 h-8 text-orange-600"})}),e.jsx("p",{className:"font-bold text-xl",children:s.conversionFunnel.trials.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trials"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(j,{className:"w-8 h-8 text-purple-600"})}),e.jsx("p",{className:"font-bold text-xl",children:s.conversionFunnel.conversions.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Conversions"})]})]})})]})]})})}export{oe as default};
