import{c as I,q as T,s as q,o as z,r as R,j as e,m as g,L as F,B as f,C as w,a as S,b as C,e as k,d as J}from"./index-CuprRf9A.js";import{u as H,F as Y,a as l,b as n,c as i,d as o,e as c,z as s,t as O}from"./form-BS08ZxNH.js";import{u as W}from"./useQuery-ZJWojQjZ.js";import{u as V}from"./useMutation-BvbhO3Ww.js";import{H as N,F as v}from"./Footer-SL7L-qNs.js";import{I as d}from"./input-C7AUaPAc.js";import{A as P}from"./arrow-left-C_Zpo_h0.js";import{U as K}from"./user-Cl-ZMPZM.js";import{M as Q}from"./mail-Fpe7ux_n.js";import{P as X}from"./phone-CuS033j8.js";import{U as $}from"./upload-tPu2ZDTa.js";import{D as L}from"./dollar-sign-CKcXNn6o.js";import{C as G}from"./calendar-BnnWEMnC.js";import{F as Z}from"./file-text-CPhKcBMc.js";import"./label-BOUa42Nh.js";import"./utils-km2FGkQ4.js";import"./worknovas-logo_1758639732999-amMO5GSq.js";import"./linkedin-DWPjXw38.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=I("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),_=s.object({firstName:s.string().min(2,"First name must be at least 2 characters"),lastName:s.string().min(2,"Last name must be at least 2 characters"),email:s.string().email("Please enter a valid email address"),phone:s.string().min(10,"Please enter a valid phone number"),linkedinUrl:s.string().url("Please enter a valid LinkedIn URL").optional().or(s.literal("")),portfolioUrl:s.string().url("Please enter a valid portfolio URL").optional().or(s.literal("")),yearsExperience:s.coerce.number().min(0,"Years of experience must be 0 or greater").max(50,"Years of experience must be less than 50"),currentSalary:s.string().optional(),expectedSalary:s.string().min(1,"Expected salary is required"),availabilityDate:s.string().min(1,"Availability date is required")});function ye(){const{jobId:b}=T(),[,D]=q(),{toast:u}=z(),[x,U]=R.useState(null),{data:m,isLoading:A}=W({queryKey:[`/api/jobs/${b}`],enabled:!!b}),t=H({resolver:O(_),defaultValues:{firstName:"",lastName:"",email:"",phone:"",linkedinUrl:"",portfolioUrl:"",yearsExperience:0,currentSalary:"",expectedSalary:"",availabilityDate:""}}),y=V({mutationFn:async a=>{const r=new FormData;Object.entries(a).forEach(([h,j])=>{h!=="resumeFile"&&j!==void 0&&j!==null&&r.append(h,j.toString())}),r.append("jobId",b),x&&r.append("resume",x);const p=await fetch("/api/job-applications",{method:"POST",body:r,credentials:"include"});if(!p.ok){const h=await p.json();throw new Error(h.message||"Failed to submit application")}return p.json()},onSuccess:()=>{u({title:"Application Submitted",description:"Your job application has been successfully submitted. We'll be in touch soon!"}),setTimeout(()=>{D("/jobs")},2e3)},onError:a=>{u({title:"Submission Failed",description:a.message||"Failed to submit application. Please try again.",variant:"destructive"})}}),B=a=>{var p;const r=(p=a.target.files)==null?void 0:p[0];if(r){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(r.type)){u({title:"Invalid File Type",description:"Please upload a PDF or DOCX document",variant:"destructive"});return}if(r.size>5242880){u({title:"File Too Large",description:"File size must be less than 5MB",variant:"destructive"});return}U(r)}},M=a=>{if(!x){u({title:"Resume Required",description:"Please upload your resume before submitting",variant:"destructive"});return}y.mutate({...a,resumeFile:x})};return A?e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"min-h-screen bg-background",children:[e.jsx(N,{}),e.jsx("main",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})})})}),e.jsx(v,{})]}):m?e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"min-h-screen bg-background",children:[e.jsx(N,{}),e.jsx("main",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(F,{href:"/jobs",children:e.jsxs(f,{variant:"ghost",className:"mb-6","data-testid":"button-back-to-jobs",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Back to Jobs"]})}),e.jsx(w,{className:"mb-8","data-testid":"job-details-card",children:e.jsxs(S,{children:[e.jsxs(C,{className:"text-2xl text-navy","data-testid":"job-title",children:["Apply for ",m.title]}),e.jsx(k,{className:"text-lg",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"font-semibold",children:m.company}),e.jsxs("span",{children:[m.location," • ",m.type," • ",m.experience]}),e.jsx("span",{className:"text-primary font-semibold",children:m.salaryRange})]})})]})}),e.jsxs(w,{"data-testid":"application-form-card",children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Job Application"]}),e.jsx(k,{children:"Please fill out all required fields to submit your application."})]}),e.jsx(J,{children:e.jsx(Y,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(M),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"firstName",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"First Name *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter your first name","data-testid":"input-first-name",value:a.value||"",onChange:a.onChange,onBlur:a.onBlur,name:a.name,disabled:a.disabled})}),e.jsx(c,{})]})}),e.jsx(l,{control:t.control,name:"lastName",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Last Name *"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter your last name","data-testid":"input-last-name",...a})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"email",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Email Address *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{type:"email",placeholder:"your.email@example.com",className:"pl-10","data-testid":"input-email",...a})]})}),e.jsx(c,{})]})}),e.jsx(l,{control:t.control,name:"phone",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Phone Number *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{type:"tel",placeholder:"(555) 123-4567",className:"pl-10","data-testid":"input-phone",...a})]})}),e.jsx(c,{})]})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Resume *"}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"relative border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer",children:[e.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:x?e.jsxs("span",{className:"text-primary font-semibold",children:["Selected: ",x.name]}):"Upload your resume (PDF or Word document)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Maximum file size: 5MB"})]}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:B,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10","data-testid":"input-resume-upload"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{control:t.control,name:"linkedinUrl",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"LinkedIn Profile"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{type:"url",placeholder:"https://linkedin.com/in/yourprofile",className:"pl-10","data-testid":"input-linkedin",...a})]})}),e.jsx(c,{})]})}),e.jsx(l,{control:t.control,name:"portfolioUrl",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Portfolio/Website"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{type:"url",placeholder:"https://yourportfolio.com",className:"pl-10","data-testid":"input-portfolio",...a})]})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(l,{control:t.control,name:"yearsExperience",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Years of Experience *"}),e.jsx(o,{children:e.jsx(d,{type:"number",min:"0",max:"50",placeholder:"5","data-testid":"input-years-experience",...a,onChange:r=>a.onChange(parseInt(r.target.value)||0)})}),e.jsx(c,{})]})}),e.jsx(l,{control:t.control,name:"currentSalary",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Current Salary"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{placeholder:"75,000",className:"pl-10","data-testid":"input-current-salary",value:a.value||"",onChange:a.onChange,onBlur:a.onBlur,name:a.name,disabled:a.disabled})]})}),e.jsx(c,{})]})}),e.jsx(l,{control:t.control,name:"expectedSalary",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Expected Salary *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{placeholder:"85,000",className:"pl-10","data-testid":"input-expected-salary",value:a.value||"",onChange:a.onChange,onBlur:a.onBlur,name:a.name,disabled:a.disabled})]})}),e.jsx(c,{})]})})]}),e.jsx(l,{control:t.control,name:"availabilityDate",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Availability Date *"}),e.jsx(o,{children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(d,{type:"date",className:"pl-10","data-testid":"input-availability-date",...a})]})}),e.jsx(c,{})]})}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx(f,{type:"submit",size:"lg",disabled:y.isPending,"data-testid":"button-submit-application",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Submit Application"]})})})]})})})]})]})})}),e.jsx(v,{})]}):e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"min-h-screen bg-background",children:[e.jsx(N,{}),e.jsx("main",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-navy mb-4",children:"Job Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The job posting you're looking for doesn't exist or has been removed."}),e.jsx(F,{href:"/jobs",children:e.jsxs(f,{children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Back to Jobs"]})})]})})}),e.jsx(v,{})]})}export{ye as default};
