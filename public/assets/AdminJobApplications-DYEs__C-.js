import{c as M,r as f,j as e,L as $,B as j,C as g,d as v,a as w,b as S,o as B,p as F,K as P}from"./index-CuprRf9A.js";import{u as C}from"./useQuery-ZJWojQjZ.js";import{u as q}from"./useMutation-BvbhO3Ww.js";import{B as H}from"./badge-gyCBv1ly.js";import{I as A}from"./input-C7AUaPAc.js";import{S as z,a as J,b as R,c as V,d as k}from"./select-CtwjQDgd.js";import{T as K,a as O,b as L,c as i,d as _,e as n}from"./table-CQCSVrtb.js";import{D as Q,a as Z,b as G,c as W,d as X,e as Y}from"./dialog-BKYCW-Wh.js";import{A as ee}from"./arrow-left-C_Zpo_h0.js";import{F as se}from"./filter-DZsR-ZXm.js";import{S as ae}from"./search-CZt2VAwY.js";import{U as D}from"./users-CvrVW2dn.js";import{E as T}from"./eye-CjoTDjXc.js";import{C as re}from"./clock-CaA2KRiY.js";import{T as te}from"./triangle-alert-CjSSRQIf.js";import{C as le}from"./circle-check-big-DSnttqeU.js";import{M as ie}from"./mail-Fpe7ux_n.js";import{F as ne}from"./file-text-CPhKcBMc.js";import{D as de}from"./download-yc1mZr8Q.js";import"./utils-km2FGkQ4.js";import"./index-B6XFBDnY.js";import"./Combination-DKMiJ1tB.js";import"./index-DqFLgNHl.js";import"./index-CCUsGLlQ.js";import"./check-CFzykUac.js";import"./index-_bRr0aPa.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=M("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),N={submitted:"bg-blue-100 text-blue-800",reviewing:"bg-yellow-100 text-yellow-800",interviewing:"bg-purple-100 text-purple-800",rejected:"bg-red-100 text-red-800",hired:"bg-green-100 text-green-800"},y={submitted:re,reviewing:T,interviewing:D,rejected:te,hired:le},oe=({application:a,job:l})=>{const{toast:d}=B(),m=q({mutationFn:async t=>(await F("PATCH",`/api/admin/job-applications/${a.id}`,t)).json(),onSuccess:()=>{P.invalidateQueries({queryKey:["/api/admin/job-applications"]}),d({title:"Application Updated",description:"Status updated successfully"})},onError:t=>{d({title:"Update Failed",description:t.message||"Failed to update application",variant:"destructive"})}}),c=t=>{m.mutate({status:t})};return e.jsxs(G,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(W,{children:[e.jsxs(X,{children:[a.firstName," ",a.lastName]}),e.jsxs(Y,{children:["Application for ",(l==null?void 0:l.title)||"Unknown Position"," at ",(l==null?void 0:l.company)||"Unknown Company"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"}),e.jsx("a",{href:`mailto:${a.email}`,className:"text-blue-600 hover:underline ml-2",children:a.email})]}),a.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"}),e.jsx("a",{href:`tel:${a.phone}`,className:"text-blue-600 hover:underline ml-2",children:a.phone})]}),a.linkedinUrl&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"LinkedIn:"}),e.jsx("a",{href:a.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-2",children:"View Profile"})]}),a.portfolioUrl&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Portfolio:"}),e.jsx("a",{href:a.portfolioUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-2",children:"View Portfolio"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Experience & Salary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.yearsExperience!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Experience:"}),e.jsxs("span",{className:"ml-2",children:[a.yearsExperience," years"]})]}),a.currentSalary&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Current Salary:"}),e.jsxs("span",{className:"ml-2",children:["$",a.currentSalary]})]}),a.expectedSalary&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expected Salary:"}),e.jsxs("span",{className:"ml-2",children:["$",a.expectedSalary]})]}),a.availabilityDate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Available:"}),e.jsx("span",{className:"ml-2",children:new Date(a.availabilityDate).toLocaleDateString()})]})]})]})]}),a.resumeUrl&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),"Resume"]}),e.jsxs(j,{variant:"secondary",size:"sm",onClick:()=>window.open(a.resumeUrl,"_blank"),className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Download Resume"]})]}),a.coverLetter&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Cover Letter"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-sm whitespace-pre-wrap",children:a.coverLetter})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Application Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(N).map(t=>{const h=y[t],o=a.status===t;return e.jsxs(j,{variant:o?"primary":"secondary",size:"sm",onClick:()=>!o&&c(t),disabled:m.isPending||o,className:`flex items-center gap-2 ${o?"bg-primary":""}`,children:[e.jsx(h,{className:"w-4 h-4"}),t.charAt(0).toUpperCase()+t.slice(1)]},t)})})]}),e.jsx("div",{className:"pt-4 border-t text-sm text-gray-500",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Applied:"}),e.jsx("span",{className:"ml-2",children:new Date(a.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Last Updated:"}),e.jsx("span",{className:"ml-2",children:new Date(a.updatedAt).toLocaleString()})]})]})})]})]})};function Fe(){const[a,l]=f.useState(""),[d,m]=f.useState("all"),[c,t]=f.useState(""),{data:h=[],isLoading:o}=C({queryKey:["/api/admin/job-applications"]}),{data:U=[]}=C({queryKey:["/api/admin/jobs"]}),b=s=>U.find(r=>r.id===s),u=h.filter(s=>{const r=s.firstName.toLowerCase().includes(a.toLowerCase())||s.lastName.toLowerCase().includes(a.toLowerCase())||s.email.toLowerCase().includes(a.toLowerCase()),x=d==="all"||s.status===d,p=b(s.jobId),I=c===""||p&&(p.title.toLowerCase().includes(c.toLowerCase())||p.company.toLowerCase().includes(c.toLowerCase()));return r&&x&&I}),E=h.reduce((s,r)=>(s[r.status]=(s[r.status]||0)+1,s),{});return o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx($,{href:"/admin",children:e.jsxs(j,{variant:"ghost",size:"sm",className:"mb-2",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsx("h1",{className:"text-3xl font-bold text-navy",children:"Job Applications"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and review job applications from candidates"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(E).map(([s,r])=>{const x=y[s];return e.jsx(g,{children:e.jsxs(v,{className:"flex items-center p-6",children:[e.jsx(x,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s.charAt(0).toUpperCase()+s.slice(1)}),e.jsx("p",{className:"text-2xl font-bold",children:r})]})]})},s)})}),e.jsxs(g,{children:[e.jsx(w,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Filters"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(A,{placeholder:"Search applicants...",className:"pl-10",value:a,onChange:s=>l(s.target.value),"data-testid":"search-applications"})]}),e.jsxs(z,{value:d,onValueChange:m,children:[e.jsx(J,{"data-testid":"filter-status",children:e.jsx(R,{placeholder:"All Statuses"})}),e.jsxs(V,{children:[e.jsx(k,{value:"all",children:"All Statuses"}),Object.keys(N).map(s=>e.jsx(k,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]}),e.jsx(A,{placeholder:"Search jobs...",value:c,onChange:s=>t(s.target.value),"data-testid":"search-jobs"}),e.jsx(j,{variant:"secondary",onClick:()=>{l(""),m("all"),t("")},"data-testid":"button-clear-filters",children:"Clear Filters"})]})})]}),e.jsxs(g,{children:[e.jsx(w,{children:e.jsx(S,{className:"flex items-center justify-between",children:e.jsxs("span",{children:["Applications (",u.length,")"]})})}),e.jsx(v,{children:u.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No applications found matching your criteria"})]}):e.jsxs(K,{children:[e.jsx(O,{children:e.jsxs(L,{children:[e.jsx(i,{children:"Applicant"}),e.jsx(i,{children:"Position"}),e.jsx(i,{children:"Experience"}),e.jsx(i,{children:"Expected Salary"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Applied"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(_,{children:u.map(s=>{const r=b(s.jobId),x=y[s.status];return e.jsxs(L,{"data-testid":`application-${s.id}`,children:[e.jsx(n,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email})]})}),e.jsx(n,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(r==null?void 0:r.title)||"Unknown Position"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r==null?void 0:r.company})]})}),e.jsx(n,{children:s.yearsExperience!==void 0?`${s.yearsExperience} years`:"-"}),e.jsx(n,{children:s.expectedSalary?`$${s.expectedSalary}`:"-"}),e.jsx(n,{children:e.jsxs(H,{className:N[s.status],children:[e.jsx(x,{className:"w-3 h-3 mr-1"}),s.status]})}),e.jsx(n,{children:e.jsx("span",{className:"text-sm",children:new Date(s.createdAt).toLocaleDateString()})}),e.jsx(n,{children:e.jsxs(Q,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm","data-testid":`view-application-${s.id}`,children:e.jsx(T,{className:"w-4 h-4"})})}),e.jsx(oe,{application:s,job:r})]})})]},s.id)})})]})})]})]})}export{Fe as default};
