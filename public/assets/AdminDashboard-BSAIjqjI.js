import{c as A,r as j,j as e,x as N,X as L,y as D,B as f,m as I,L as o,C as d,a as m,d as x,b as h,e as p,s as M,o as $,J}from"./index-CuprRf9A.js";import{u as q}from"./useQuery-ZJWojQjZ.js";import{B as y}from"./badge-gyCBv1ly.js";import{R as V,T as U,O as z,C as O,a as W,b as T,D as B,P as H}from"./index-_bRr0aPa.js";import{l as F}from"./worknovas-logo_1758639732999-amMO5GSq.js";import{D as k}from"./dollar-sign-CKcXNn6o.js";import{U as u}from"./users-CvrVW2dn.js";import{M as b}from"./mail-Fpe7ux_n.js";import{B as v}from"./briefcase-DGZYI2xj.js";import{A as K}from"./activity-CJH3RrLQ.js";import{B as E}from"./brain-PyXg_Y2k.js";import{C as Q}from"./clock-CaA2KRiY.js";import{S as X}from"./settings-Ct9MlVja.js";import{C as Y}from"./chart-column-BfBdnWs7.js";import{C as G}from"./credit-card-Dv6cgiGt.js";import{S as Z}from"./shield-B5sw-Pqc.js";import{T as _}from"./trending-up-3yF84ArF.js";import"./utils-km2FGkQ4.js";import"./index-DqFLgNHl.js";import"./Combination-DKMiJ1tB.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=A("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=A("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),se=V,ae=U,te=H,P=j.forwardRef(({className:s,...a},t)=>e.jsx(z,{className:N("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));P.displayName=z.displayName;const ie=D("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),R=j.forwardRef(({side:s="right",className:a,children:t,...i},r)=>e.jsxs(te,{children:[e.jsx(P,{}),e.jsxs(O,{ref:r,className:N(ie({side:s}),a),...i,children:[t,e.jsxs(W,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));R.displayName=O.displayName;const re=j.forwardRef(({className:s,...a},t)=>e.jsx(T,{ref:t,className:N("text-lg font-semibold text-foreground",s),...a}));re.displayName=T.displayName;const ne=j.forwardRef(({className:s,...a},t)=>e.jsx(B,{ref:t,className:N("text-sm text-muted-foreground",s),...a}));ne.displayName=B.displayName;const le=({onClose:s})=>{const{toast:a}=$(),{logout:t}=J(),[i,r]=j.useState(!1),n=async()=>{if(!i){r(!0),s&&s();try{await t(),a({title:"Logged out successfully",description:"You have been securely logged out."})}catch(g){console.error("Logout error:",g),a({title:"Logout failed",description:"There was an issue logging out. Please try again.",variant:"destructive"})}finally{r(!1)}}};return e.jsxs(f,{variant:"ghost",className:"w-full justify-start",size:"sm",onClick:n,disabled:i,"data-testid":"button-logout",children:[e.jsx(ee,{className:"w-4 h-4 mr-3"}),i?"Logging out...":"Logout"]})},C=({onClose:s})=>{const[a]=M(),t=[{name:"Overview",href:"/admin",icon:Y},{name:"Enrollments",href:"/admin/enrollments",icon:u},{name:"Jobs",href:"/admin/jobs",icon:v},{name:"AI CareerCatalyst",href:"/admin/ai-optimizer",icon:E},{name:"Contacts",href:"/admin/contacts",icon:b},{name:"Billing",href:"/admin/billing",icon:G},{name:"Security",href:"/admin/security",icon:Z},{name:"Analytics",href:"/admin/analytics",icon:_}];return e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(o,{href:"/",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:F,alt:"WorkNovas Technologies",className:"h-8 w-auto object-contain"}),e.jsx("span",{className:"font-bold text-lg text-ink",children:"Admin Console"})]})}),s&&e.jsx(f,{variant:"ghost",size:"sm",onClick:s,className:"lg:hidden",children:e.jsx(L,{className:"w-4 h-4"})})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:t.map(i=>{const r=i.icon,n=a===i.href||i.href!=="/admin"&&a.startsWith(i.href);return e.jsx(o,{href:i.href,children:e.jsxs("div",{className:`flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n?"bg-primary text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:s,children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{children:i.name})]})},i.name)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[e.jsx(o,{href:"/admin/activity",children:e.jsxs(f,{variant:"ghost",className:"w-full justify-start",size:"sm",onClick:s,children:[e.jsx(Q,{className:"w-4 h-4 mr-3"}),"Activity"]})}),e.jsx(o,{href:"/admin/security",children:e.jsxs(f,{variant:"ghost",className:"w-full justify-start",size:"sm",onClick:s,children:[e.jsx(X,{className:"w-4 h-4 mr-3"}),"Settings"]})}),e.jsx(le,{onClose:s})]})]})},c=({title:s,value:a,description:t,icon:i,trend:r})=>e.jsxs(d,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:s}),e.jsx(i,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t}),r&&e.jsx(y,{variant:r.startsWith("+")?"default":"secondary",className:"text-xs",children:r})]})]})]});function Le(){const[s,a]=j.useState(!1),{data:t,isLoading:i,isError:r}=q({queryKey:["/api/admin/analytics"],refetchInterval:5*60*1e3,retry:3,retryDelay:2e3});if(i&&!t)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(r&&!t)return e.jsxs("div",{className:"min-h-screen bg-background flex",children:[e.jsx("div",{className:"hidden lg:flex w-64 flex-col",children:e.jsx(C,{})}),e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800",children:"⚠️ Analytics data temporarily unavailable. Showing basic dashboard."})}),e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Business Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(c,{title:"Total Revenue",value:"$0",description:"Loading...",icon:k}),e.jsx(c,{title:"Active Enrollments",value:"0",description:"Loading...",icon:u}),e.jsx(c,{title:"Contact Inquiries",value:"0",description:"Loading...",icon:b}),e.jsx(c,{title:"Job Applications",value:"0",description:"Loading...",icon:v})]})]})]});const{overview:n,enrollments:g}=t||{overview:{totalRevenue:0,activeEnrollments:0,totalEnrollments:0,totalContacts:0,totalApplications:0,totalJobs:0},enrollments:{byStatus:{},byPlan:{}}};return e.jsxs("div",{className:"min-h-screen bg-background flex",children:[e.jsx("div",{className:"hidden lg:flex w-64 flex-col",children:e.jsx(C,{})}),e.jsxs(se,{open:s,onOpenChange:a,children:[e.jsx(ae,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",className:"lg:hidden fixed top-4 left-4 z-50",style:{display:"none"},children:e.jsx(S,{className:"w-4 h-4"})})}),e.jsx(R,{side:"left",className:"p-0 w-64",children:e.jsx(C,{onClose:()=>a(!1)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(f,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>a(!0),children:e.jsx(S,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-ink",children:"Business Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor your business performance and key metrics"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(y,{variant:"outline",className:"text-xs",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),"Live Data"]})})]})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs(I.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(c,{title:"Total Revenue",value:`$${n.totalRevenue.toLocaleString()}`,description:"Career Advisory earnings",icon:k}),e.jsx(c,{title:"Active Enrollments",value:n.activeEnrollments,description:`${n.totalEnrollments} total enrollments`,icon:u}),e.jsx(c,{title:"Contact Inquiries",value:n.totalContacts,description:"New business leads",icon:b}),e.jsx(c,{title:"Job Applications",value:n.totalApplications,description:`${n.totalJobs} active positions`,icon:v})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{href:"/admin/enrollments",children:e.jsxs(d,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(m,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsx(u,{className:"h-5 w-5 text-primary"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-base",children:"Manage Enrollments"}),e.jsx(p,{children:"View and update Career Advisory participants"})]})]})}),e.jsx(o,{href:"/admin/jobs",children:e.jsxs(d,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(m,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsx(v,{className:"h-5 w-5 text-primary"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-base",children:"Job Management"}),e.jsx(p,{children:"Post jobs and review applications"})]})]})}),e.jsx(o,{href:"/admin/ai-optimizer",children:e.jsxs(d,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(m,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsx(E,{className:"h-5 w-5 text-primary"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-base",children:"AI CareerCatalyst"}),e.jsx(p,{children:"Monitor AI resume optimization activity"})]})]})}),e.jsx(o,{href:"/admin/contacts",children:e.jsxs(d,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(m,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsx(b,{className:"h-5 w-5 text-primary"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-base",children:"Contact Inquiries"}),e.jsx(p,{children:"Respond to client inquiries"})]})]})}),e.jsx(o,{href:"/admin/job-applications",children:e.jsxs(d,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(m,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsx(u,{className:"h-5 w-5 text-primary"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-base",children:"Job Applications"}),e.jsx(p,{children:"Manage and review job applications from candidates"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Enrollment Status"}),e.jsx(p,{children:"Current status of all enrollments"})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(g.byStatus).map(([l,w])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l==="active"?"bg-green-500":l==="confirmed"?"bg-blue-500":l==="pending"?"bg-yellow-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm capitalize",children:l})]}),e.jsx(y,{variant:"outline",children:w})]},l))})})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Payment Plans"}),e.jsx(p,{children:"Distribution of chosen payment options"})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(g.byPlan).map(([l,w])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsx("span",{className:"text-sm",children:l==="full"?"Pay in Full ($1,500)":l==="2x"?"Split Payment (2 × $750)":"3 Payments (3 × $500)"})]}),e.jsx(y,{variant:"outline",children:w})]},l))})})]})]})]})})]})]})}export{Le as default};
