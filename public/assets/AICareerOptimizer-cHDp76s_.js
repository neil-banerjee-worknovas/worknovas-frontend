import{c as E,r as l,j as e,A as P,m as t,s as O,o as F,B as v,X as L}from"./index-CuprRf9A.js";import{H as R,F as M}from"./Footer-SL7L-qNs.js";import{A as X}from"./activity-CJH3RrLQ.js";import{C as H}from"./check-CFzykUac.js";import{F as $}from"./file-text-CPhKcBMc.js";import{U as T}from"./upload-tPu2ZDTa.js";import"./worknovas-logo_1758639732999-amMO5GSq.js";import"./linkedin-DWPjXw38.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=E("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=E("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),p=["Loading your resume...","Parsing your resume...","Identifying core sections...","Identifying your work experiences...","Identifying other experiences...","Evaluating resume length...","Identifying bullet points...","Analyzing resume depth..."],_=({label:s,state:i,index:r})=>e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:r*.1},className:"flex items-center gap-3 p-3 bg-blue-50 rounded-full mb-2","data-testid":`step-item-${r}`,children:[e.jsxs("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:[i==="done"&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"w-4 h-4 text-white"})}),i==="running"&&e.jsxs("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center relative",children:[e.jsx(t.div,{animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"w-2 h-2 bg-white rounded-full"}),e.jsx(t.span,{className:"absolute -right-6 text-blue-500 text-sm font-medium",animate:{opacity:[.4,1,.4]},transition:{duration:1,repeat:1/0},children:"..."})]}),i==="pending"&&e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full"})]}),e.jsx("span",{className:"text-gray-800 text-sm font-medium",children:s})]});function q({isVisible:s,onComplete:i,autoProgress:r=!0,progressInterval:o=1500}){const[g,c]=l.useState(0),[N,d]=l.useState(Array(p.length).fill("pending")),[h,u]=l.useState(30);return l.useEffect(()=>{if(!s||!r)return;const y=setInterval(()=>{c(a=>{const n=a+1;d(S=>{const j=[...S];return a<p.length&&(j[a]="done"),n<p.length&&(j[n]="running"),j});const f=Math.min(100,(n+1)/p.length*100);return u(f),n>=p.length?(setTimeout(()=>{i==null||i()},1e3),a):n})},o);return d(a=>{const n=[...a];return n[0]="running",n}),()=>clearInterval(y)},[s,r,o,i]),s?e.jsx(P,{children:e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center p-4","data-testid":"stepper-loading-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(t.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.4,ease:"easeOut"},className:"relative bg-white rounded-lg shadow-2xl w-full max-w-md p-6","data-testid":"loading-modal",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(t.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-blue-500"})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(t.div,{className:"h-full bg-blue-500 rounded-full",initial:{width:"30%"},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"}})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 text-center mb-2",children:"Analyzing your resume"}),e.jsxs("p",{className:"text-sm text-gray-500 text-center mb-6",children:["Step ",Math.min(g+1,p.length)," of ",p.length]}),e.jsx("div",{className:"space-y-2",children:p.map((y,a)=>e.jsx(_,{label:y,state:N[a],index:a},a))})]})]})}):null}const G=()=>e.jsxs(t.div,{className:"relative min-h-[50vh] bg-brand-900 overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:"radial-gradient(circle at center, rgba(36, 107, 253, 0.15), transparent 70%)"}}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 py-16 text-center",children:e.jsxs(t.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2},children:[e.jsx(t.h1,{className:"text-5xl md:text-7xl font-bold text-white mb-4 max-w-4xl mx-auto",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.4},children:"AI CareerCatalyst"}),e.jsx(t.p,{className:"text-xl md:text-2xl text-white/90 max-w-4xl mx-auto",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.6},children:"Ensure your resume passes Applicant Tracking Systems with dynamic AI evaluation"})]})})]}),J=({onFileSelect:s,selectedFile:i,onRemoveFile:r})=>{const[o,g]=l.useState(!1),c=l.useRef(null),N=a=>{a.preventDefault(),g(!0)},d=a=>{a.preventDefault(),g(!1)},h=a=>{a.preventDefault(),g(!1);const n=a.dataTransfer.files;if(n.length>0){const f=n[0];y(f)&&s(f)}},u=a=>{const n=a.target.files;n&&n.length>0&&s(n[0])},y=a=>["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(a.type);return e.jsx(t.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.3},className:"max-w-md mx-auto",children:e.jsxs(t.div,{className:`
          relative border-2 border-dashed rounded-2xl p-8 text-center transition-all duration-300
          ${o?"border-wn-blue bg-wn-mute":i?"border-wn-blue bg-white":"border-wn-blue bg-white hover:bg-wn-mute/50"}
        `,onDragOver:N,onDragLeave:d,onDrop:h,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("input",{ref:c,type:"file",accept:".pdf,.docx,.txt",onChange:u,className:"hidden","data-testid":"input-file"}),i?e.jsx(t.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx($,{className:"h-8 w-8 text-wn-green"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(i.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:r,className:"ml-auto","data-testid":"button-remove-file",children:e.jsx(L,{className:"h-4 w-4"})})]})}):e.jsxs(t.div,{className:"space-y-4",initial:{scale:.9},animate:{scale:1},children:[e.jsx(t.div,{animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(T,{className:"h-12 w-12 mx-auto text-wn-blue"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-wn-text mb-2",children:"Drag & drop your resume here"}),e.jsx("p",{className:"text-sm text-wn-subtle mb-4",children:"Supports PDF, DOCX, and TXT files"}),e.jsxs(v,{onClick:()=>{var a;return(a=c.current)==null?void 0:a.click()},className:"btn-primary","data-testid":"button-upload",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Choose File"]})]})]})]})})},V=({onClick:s,disabled:i,isLoading:r})=>e.jsx(t.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.5},className:"text-center mt-8",children:e.jsx(v,{onClick:s,disabled:i||r,size:"lg",className:"btn-primary px-8 py-4 text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-analyze",children:r?e.jsxs(t.div,{className:"flex items-center gap-2",children:[e.jsx(t.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Analyzing..."})]}):e.jsxs(t.div,{className:"flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(U,{className:"h-5 w-5"}),e.jsx("span",{children:"Analyze Resume"})]})})}),Y=({isVisible:s})=>e.jsx(t.div,{initial:{scaleX:0},animate:{scaleX:s?1:0},className:"fixed top-0 left-0 right-0 h-1 bg-wn-blue z-50 origin-left",transition:{duration:2,ease:"easeInOut"}}),A=["Loading your resume...","Parsing your resume...","Identifying core sections...","Identifying your work experiences...","Identifying other experiences...","Evaluating resume length...","Identifying bullet points...","Analyzing resume depth...","Evaluating impact...","Analyzing writing style...","Identifying weak verbs...","Identifying fillers...","Generating suggested lines...","Generating relevant metrics...","Calculating scores...","Personalising recommendations...","Preparing report..."],K=({errorMessage:s,onClose:i,onTryAgain:r})=>e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center",role:"alertdialog","aria-live":"polite","aria-labelledby":"error-title","aria-describedby":"error-message",children:e.jsxs(t.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-lg w-full mx-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{id:"error-title",className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-4",children:"Analysis failed"}),e.jsx("p",{id:"error-message",className:"text-gray-600 dark:text-gray-300 text-center mb-8 leading-relaxed",children:s}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(v,{variant:"secondary",onClick:i,"data-testid":"button-close-error",children:"Close"}),e.jsx(v,{onClick:r,"data-testid":"button-try-again",className:"bg-wn-blue hover:bg-wn-blue/90",children:"Try again"})]})]})});function re(){const[s,i]=l.useState(null),[r,o]=l.useState(!1),[g,c]=l.useState(0),[N,d]=l.useState(0),[h,u]=l.useState({hasError:!1,message:""}),[,y]=O(),{toast:a}=F(),n=w=>{i(w)},f=()=>{i(null)},S=()=>{u({hasError:!1,message:""}),o(!1),c(0),d(0)},j=()=>{u({hasError:!1,message:""}),o(!1),c(0),d(0),s&&z()},C=()=>{let m=0;const x=setInterval(()=>{m<A.length?(c(m),d((m+1)/A.length*100),m++):clearInterval(x)},800);return()=>clearInterval(x)},z=async()=>{if(!s){a({title:"File Required",description:"Please select a file to analyze",variant:"destructive"});return}o(!0),c(0),d(0);const w=C();try{const m=new FormData;m.append("file",s);const x=await fetch("/api/optimizer/upload",{method:"POST",body:m});if(!x.ok){const k=await x.json().catch(()=>({message:"Upload failed"}));throw new Error(k.message||"Upload failed")}const D=(await x.json()).rid;if(!D)throw new Error("Upload failed: no RID returned");const I=await fetch(`/api/optimizer/analyze/${D}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobDescription:void 0})});if(!I.ok){const k=await I.json().catch(()=>({message:"Analysis failed"}));throw new Error(k.message||"Analysis failed")}const b=await I.json();w(),c(A.length-1),d(100),setTimeout(()=>{if(b.rid)sessionStorage.setItem(`optimizer_results_${b.rid}`,JSON.stringify(b)),y(`/optimizer/results?rid=${b.rid}`);else if(b.documentType==="other")u({hasError:!0,message:b.message||"Please upload a resume (PDF/DOCX/TXT)."}),o(!1);else throw new Error("Invalid response from analysis")},500)}catch(m){console.error("Analysis error:",m),w();const x=m.message||"There was an error analyzing your resume. Please try again.";u({hasError:!0,message:x}),o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(R,{}),e.jsx(Y,{isVisible:r}),e.jsx(q,{isVisible:r&&!h.hasError,onComplete:()=>{},autoProgress:!0,progressInterval:800}),e.jsx(P,{children:h.hasError&&e.jsx(K,{errorMessage:h.message,onClose:S,onTryAgain:j})}),e.jsx(G,{}),e.jsx(t.main,{className:"container mx-auto px-4 py-16",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.2},children:e.jsx(t.div,{className:"max-w-2xl mx-auto",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.4},children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-8",children:[e.jsx(J,{onFileSelect:n,selectedFile:s,onRemoveFile:f}),s&&e.jsx(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 p-4 bg-wn-green/10 rounded-lg border border-wn-green/20",children:e.jsx("p",{className:"text-sm text-wn-green text-center",children:"File ready for analysis"})}),e.jsx(V,{onClick:z,disabled:!s,isLoading:r})]})})}),e.jsx(M,{})]})}export{re as default};
