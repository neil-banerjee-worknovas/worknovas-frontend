import{c as A,r as x,j as e,L as B,B as h,C as r,d as n,a as j,b as u,e as P}from"./index-CuprRf9A.js";import{u as E}from"./useQuery-ZJWojQjZ.js";import{B as I}from"./badge-gyCBv1ly.js";import{I as H}from"./input-C7AUaPAc.js";import{S as p,a as g,b as f,c as v,d as a}from"./select-CtwjQDgd.js";import{T as U,a as V,b as N,c as t,d as $,e as l}from"./table-CQCSVrtb.js";import{A as q}from"./arrow-left-C_Zpo_h0.js";import{C as b}from"./credit-card-Dv6cgiGt.js";import{D as z}from"./download-yc1mZr8Q.js";import{D as Q}from"./dollar-sign-CKcXNn6o.js";import{C as y}from"./calendar-BnnWEMnC.js";import{T as K}from"./trending-up-3yF84ArF.js";import{S as W}from"./search-CZt2VAwY.js";import{F as Z}from"./filter-DZsR-ZXm.js";import{U as G}from"./users-CvrVW2dn.js";import"./utils-km2FGkQ4.js";import"./index-B6XFBDnY.js";import"./Combination-DKMiJ1tB.js";import"./index-DqFLgNHl.js";import"./index-CCUsGLlQ.js";import"./check-CFzykUac.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=A("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);function ge(){const[c,S]=x.useState(""),[d,T]=x.useState("all"),[C,D]=x.useState("all"),{data:o,isLoading:k,isError:L}=E({queryKey:["/api/admin/billing"],refetchInterval:5*60*1e3,retry:3,retryDelay:2e3});if(k&&!o)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});const i=o||{overview:{totalRevenue:0,monthlyRevenue:0,pendingPayments:0,completedTransactions:0},transactions:[],monthlyStats:[]},R=L&&!o,m=i.transactions.filter(s=>{const F=!c||s.customer.toLowerCase().includes(c.toLowerCase())||s.service.toLowerCase().includes(c.toLowerCase()),M=d==="all"||s.status===d;return F&&M});return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{href:"/admin",children:e.jsxs(h,{variant:"ghost",size:"sm",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-ink flex items-center gap-2",children:[e.jsx(b,{className:"w-8 h-8 text-primary"}),"Billing Management"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor payments, transactions, and revenue analytics"})]})]}),e.jsxs(h,{children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),R&&e.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800",children:"⚠️ Unable to load billing data. Showing empty state."})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",i.overview.totalRevenue.toLocaleString()]})]}),e.jsx(Q,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"This Month"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",i.overview.monthlyRevenue.toLocaleString()]})]}),e.jsx(y,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Payments"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",i.overview.pendingPayments.toLocaleString()]})]}),e.jsx(K,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(r,{children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed Transactions"}),e.jsx("p",{className:"text-2xl font-bold",children:i.overview.completedTransactions})]}),e.jsx(w,{className:"w-8 h-8 text-primary"})]})})})]}),e.jsxs(r,{className:"mb-6",children:[e.jsx(j,{children:e.jsx(u,{className:"text-lg",children:"Transaction Filters"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(H,{placeholder:"Search customers or services...",value:c,onChange:s=>S(s.target.value),className:"pl-10","data-testid":"search-transactions"})]})}),e.jsxs(p,{value:d,onValueChange:T,children:[e.jsxs(g,{className:"w-[180px]",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),e.jsx(f,{placeholder:"Filter by status"})]}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"completed",children:"Completed"}),e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"failed",children:"Failed"}),e.jsx(a,{value:"refunded",children:"Refunded"})]})]}),e.jsxs(p,{value:C,onValueChange:D,children:[e.jsxs(g,{className:"w-[160px]",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),e.jsx(f,{placeholder:"Date range"})]}),e.jsxs(v,{children:[e.jsx(a,{value:"all",children:"All Time"}),e.jsx(a,{value:"today",children:"Today"}),e.jsx(a,{value:"week",children:"This Week"}),e.jsx(a,{value:"month",children:"This Month"}),e.jsx(a,{value:"quarter",children:"This Quarter"})]})]})]})})]}),e.jsxs(r,{children:[e.jsxs(j,{children:[e.jsxs(u,{children:["Recent Transactions (",m.length,")"]}),e.jsx(P,{children:"All payment transactions and billing activity"})]}),e.jsxs(n,{className:"p-0",children:[e.jsxs(U,{children:[e.jsx(V,{children:e.jsxs(N,{children:[e.jsx(t,{children:"Customer"}),e.jsx(t,{children:"Service"}),e.jsx(t,{children:"Amount"}),e.jsx(t,{children:"Payment Method"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Date"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx($,{children:m.map(s=>e.jsxs(N,{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:s.customer})]})}),e.jsx(l,{children:e.jsx("span",{className:"text-sm",children:s.service})}),e.jsx(l,{children:e.jsxs("span",{className:"font-medium",children:["$",s.amount.toLocaleString()]})}),e.jsx(l,{children:e.jsx("span",{className:"text-sm",children:s.paymentMethod})}),e.jsx(l,{children:e.jsx(I,{className:s.status==="completed"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":s.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800",children:s.status})}),e.jsx(l,{children:e.jsx("span",{className:"text-sm",children:s.date})}),e.jsx(l,{className:"text-right",children:e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(w,{className:"w-4 h-4"})})})]},s.id))})]}),m.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(b,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No transactions found matching your criteria"})]})]})]})]})})}export{ge as default};
